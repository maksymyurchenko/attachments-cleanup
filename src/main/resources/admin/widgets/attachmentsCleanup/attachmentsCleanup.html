<widget>
  <meta charset="UTF-8" />
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1.0, user-scalable=no"
  />
  <title>Attachments Cleanup</title>
  <link
    rel="stylesheet"
    data-th-href="${portal.assetUrl({'_path=style/main.css'})}"
  />
  <div data-th-each="attachment : ${attachments}">
    <div class="attachment">
      <span class="attachmentName" data-th-utext="${attachment.name}"></span>
      <div
        class="attachmentRemoveButton"
        data-th-onclick="|removeAttachment('${attachment.name}', '${id}')|"
      ></div>
    </div>
  </div>
  <script
    data-th-widget-id="${widgetId}"
    data-th-src="${portal.assetUrl({'_path=js/jquery-3.3.1.min.js'})}"
  ></script>
  <script data-th-widget-id="${widgetId}" data-th-inline="javascript">
    var serviceUrl = [[${serviceUrl}]];
    function removeAttachment(name, cid){
      var data = {name: name, cid: cid};
      $.ajax({
        url: serviceUrl,
        type: "POST",
        data: data,
        success: function(data) {
          console.log("success");
        }
      });
    }
  </script>
</widget>
